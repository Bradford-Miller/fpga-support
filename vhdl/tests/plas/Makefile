# Makefile automatically generated by ghdl (and then modified! A lot!!)
# Version: GHDL 3.0.0-dev (2.0.0.r51.gd77a17b1) [Dunoon edition] - mcode code generator
# Command used to generate this makefile:
# ghdl --gen-makefile --std=08 tb_pads_1 behav_pads_1

GHDL=ghdl
GHDLFLAGS= --std=08
#GHDLRUNFLAGS=
# modified to generate a wave file BWM

# right now, we wrap up by tick 013, which ends by 200ns (0ns starts tick 1) Run one extra tick.
# TBD: introduce a "halt and catch fire" microcode?? Might be useful for the actual processor too, since we
# could test for it?

GHDLRUNFLAGS= --stop-time=210ns --wave=behav-plas-1.GHW

# Default target : 
all : init elab run

# Elaborate target.  Almost useless for our installed version of GHDL.
elab : force
	$(GHDL) -c $(GHDLFLAGS) -e tb_plas_1 behav_plas_1

# Run target
run : force
	$(GHDL) -c $(GHDLFLAGS) -r tb_plas_1 behav_plas_1 $(GHDLRUNFLAGS)

# Targets to analyze libraries
init: force
	# /usr/local/lib/ghdl/std/v08/../../src/std/v08/textio.vhdl
	# /usr/local/lib/ghdl/std/v08/../../src/std/v08/textio-body.vhdl
	# /usr/local/lib/ghdl/ieee/v08/../../src/ieee2008/std_logic_1164.vhdl
	# /usr/local/lib/ghdl/ieee/v08/../../src/ieee2008/std_logic_1164-body.vhdl
	# /usr/local/lib/ghdl/ieee/v08/../../src/ieee2008/numeric_std.vhdl
	# /usr/local/lib/ghdl/ieee/v08/../../src/ieee2008/numeric_std-body.vhdl
	$(GHDL) -a $(GHDLFLAGS) ../common/regpkg.vhd
	$(GHDL) -a $(GHDLFLAGS) ../common/padpkg.vhd
	$(GHDL) -a $(GHDLFLAGS) ../common/plapkg.vhd
	$(GHDL) -a $(GHDLFLAGS) ../common/my-pads.vhd
	$(GHDL) -a $(GHDLFLAGS) ../common/my-bus7.vhd
	$(GHDL) -a $(GHDLFLAGS) ../common/my-register.vhd
	$(GHDL) -a $(GHDLFLAGS) ../common/my-plas.vhd
	$(GHDL) -a $(GHDLFLAGS) pla-test.vhd

force:
